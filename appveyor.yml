# AppVeyor file
# http://www.appveyor.com/docs/appveyor-yml

# clone directory
clone_folder: c:\projects\osre

# branches to build
branches:
  # whitelist
  only:
    - master

image:
  - Visual Studio 2013
  - Visual Studio 2015
  - Visual Studio 2017
    
platform:
  - Win32
  - x64
  
configuration: Release

init:
- if "%platform%" EQU "x64" ( for %%a in (2008 2010 MinGW) do ( if "%Configuration%"=="%%a" (echo "Skipping unsupported configuration" && exit /b 1 ) ) )

install:
# Make compiler command line tools available
- ps: Start-FileDownload 'https://www.libsdl.org/release/SDL2-devel-2.0.5-VC.zip'
- ps: 7z x SDL2-devel-2.0.5-VC.zip
#- call c:\projects\osre\scripts\appveyor\compiler_setup.bat

before_build:
- call c:\projects\osre\scripts\appveyor\setup_repo.bat

build:
  parallel: true
  project: osre.sln

after_build:
  - 7z a osre.7z c:\projects\osre\bin\release\* c:\projects\osre\lib\release\*

artifacts:
  - path: osre.7z
    name: osre_lib
